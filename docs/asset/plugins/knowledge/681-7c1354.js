(self.webpackChunkTopWritePlugins_knowledge=self.webpackChunkTopWritePlugins_knowledge||[]).push([[681],{5681:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r(9221),a=r.n(n),o=r(4685),i=r.n(o),c=r(8823),s=r.n(c),u=(r(6767),r(1675),r(3708),r(914),r(7802),r(9507),r(3279),r(2378),r(6569));function l(e){let t,r,n,a=!1;return function(o){void 0===t?(t=o,r=0,n=-1):t=function(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(t,o);const i=t.length;let c=0;for(;r<i;){a&&(10===t[r]&&(c=++r),a=!1);let o=-1;for(;r<i&&-1===o;++r)switch(t[r]){case 58:-1===n&&(n=r-c);break;case 13:a=!0;case 10:o=r}if(-1===o)break;e(t.subarray(c,o),n),c=r,n=-1}c===i?t=void 0:0!==c&&(t=t.subarray(c),r-=c)}}var f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};const d="text/event-stream",v=1e3,p="last-event-id";function h(e,t){var{signal:r,headers:n,onopen:a,onmessage:o,onclose:i,onerror:c,openWhenHidden:s,fetch:u}=t,h=f(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,f)=>{const y=Object.assign({},n);let b;function m(){b.abort(),document.hidden||$()}y.accept||(y.accept=d),"undefined"==typeof document||s||document.addEventListener("visibilitychange",m);let w=v,x=0;function k(){"undefined"==typeof document||s||document.removeEventListener("visibilitychange",m),clearTimeout(x),b.abort()}null==r||r.addEventListener("abort",(()=>{k(),t()}));const O=null!=u?u:fetch,W=null!=a?a:g;async function $(){var r;b=new AbortController;try{const r=await O(e,Object.assign(Object.assign({},h),{headers:y,signal:b.signal}));await W(r),await async function(e,t){const r=e.getReader();let n;for(;!(n=await r.read()).done;)t(n.value)}(r.body,l(function(e,t,r){let n={data:"",event:"",id:"",retry:void 0};const a=new TextDecoder;return function(o,i){if(0===o.length)null==e||e(n),n={data:"",event:"",id:"",retry:void 0};else if(i>0){const e=a.decode(o.subarray(0,i)),c=i+(32===o[i+1]?2:1),s=a.decode(o.subarray(c));switch(e){case"data":n.data=n.data?n.data+"\n"+s:s;break;case"event":n.event=s;break;case"id":null==t||t(n.id=s);break;case"retry":const e=parseInt(s,10);isNaN(e)||null==r||r(n.retry=e)}}}}(o,(e=>{e?y[p]=e:delete y[p]}),(e=>{w=e})))),null==i||i(),k(),t()}catch(e){if(!b.signal.aborted)try{const t=null!==(r=null==c?void 0:c(e))&&void 0!==r?r:w;clearTimeout(x),x=setTimeout($,t)}catch(e){k(),f(e)}}}$()}))}function g(e){const t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(d)))throw new Error(`Expected content-type to be ${d}, Actual: ${t}`)}var y=r(571),b=r.n(y),m=r(9196),w=r(4099);function x(e){var t=e.children,r=(0,w.useActions)("search").setHandler,n=(0,w.useActions)("ask").setHandler,o=(0,w.useBook)(),c=o.summary,l=(0,u.zP)(),f=(0,w.useFile)(),v=(0,w.useModel)("page"),p=i()(v,2),g=p[0].lfs,y=p[1],x=y.intercept,k=y.fetch;(0,w.useAsyncEffect)(a()(s().mark((function e(){var t,i,c,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=location.pathname,i=t.endsWith("/")?t:b().dirname(t),c=b().resolve(i,f.relative("/")),o.getMetadata("can_search")&&(u=b().join(c,"search"),r(function(){var e=a()(s().mark((function e(t,r){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.request.post(u,{keyword:t,part:r});case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()),o.getMetadata("can_ask")&&(l=b().join(c,"ask"),n((function(e,t){return new Promise((function(r,n){var o=new TransformStream,i=o.readable,c=o.writable,u=i.getReader(),f=c.getWriter(),v=!1;h(l,{method:"POST",body:JSON.stringify({keyword:e,part:t}),headers:{"Content-Type":"application/json"},onopen:function(e){return a()(s().mark((function t(){var a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.ok&&null!==(a=e.headers.get("content-type"))&&void 0!==a&&a.startsWith(d)&&200===e.status?r(u):(v=!0,n());case 1:case"end":return t.stop()}}),t)})))()},onmessage:function(e){return a()(s().mark((function t(){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("[DONE]"!==e.data&&!v){t.next=3;break}return v=!0,t.abrupt("return");case 3:return t.prev=3,r=JSON.parse(e.data),t.next=7,f.write(r);case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(3);case 11:case"end":return t.stop()}}),t,null,[[3,9]])})))()},onclose:function(){return a()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=!0,e.next=3,f.close();case 3:case"end":return e.stop()}}),e)})))()},openWhenHidden:!0})}))}))));case 4:case"end":return e.stop()}}),e)}))),[]);var O=(0,m.useMemo)((function(){return c.getArticle((function(e){return e.getPath()===f.path}))||"index.html"===f.path}),[f]);return(0,m.useEffect)((function(){if(g&&l.setLfsFiles(g.files),x((function(e){e.request.use(l.interceptRequest())})),O)void 0===f.content&&k(w.history.location.pathname);else{var e=l.resolveBook(f.path);if(e){var t=c.getArticle((function(){return!0}),(function(t){return t.getMetadata("reference")===e}));if(t)return void w.history.replace(f.relative(t.path))}w.history.replace(f.relative("/"))}}),[]),O?t:null}},2906:(e,t,r)=>{"use strict";var n=r(1612).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},9128:(e,t,r)=>{"use strict";r(3279);var n=r(8358),a=r(2841),o=r(8737),i=r(4350),c=r(5360),s=r(4542),u=c("species"),l=RegExp.prototype;e.exports=function(e,t,r,f){var d=c(e),v=!i((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),p=v&&!i((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[d]=/./[d]),r.exec=function(){return t=!0,null},r[d](""),!t}));if(!v||!p||r){var h=n(/./[d]),g=t(d,""[e],(function(e,t,r,a,i){var c=n(e),s=t.exec;return s===o||s===l.exec?v&&!i?{done:!0,value:h(t,r,a)}:{done:!0,value:c(r,t,a)}:{done:!1}}));a(String.prototype,e,g[0]),a(l,d,g[1])}f&&s(l[d],"sham",!0)}},2355:(e,t,r)=>{var n=r(7072),a=r(4292),o=Math.floor,i=n("".charAt),c=n("".replace),s=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,f,d){var v=r+e.length,p=n.length,h=l;return void 0!==f&&(f=a(f),h=u),c(d,h,(function(a,c){var u;switch(i(c,0)){case"$":return"$";case"&":return e;case"`":return s(t,0,r);case"'":return s(t,v);case"<":u=f[s(c,1,-1)];break;default:var l=+c;if(0===l)return a;if(l>p){var d=o(l/10);return 0===d?a:d<=p?void 0===n[d-1]?i(c,1):n[d-1]+i(c,1):a}u=n[l-1]}return void 0===u?"":u}))}},9147:(e,t,r)=>{var n=r(3133),a=r(6749),o=r(7938),i=r(41),c=r(8737),s=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&a(u),u}if("RegExp"===i(e))return n(c,e,t);throw s("RegExp#exec called on incompatible receiver")}},6767:(e,t,r)=>{"use strict";var n,a=r(6958),o=r(8358),i=r(7583).f,c=r(9334),s=r(1533),u=r(2549),l=r(7516),f=r(347),d=r(9371),v=o("".endsWith),p=o("".slice),h=Math.min,g=f("endsWith");a({target:"String",proto:!0,forced:!!(d||g||(n=i(String.prototype,"endsWith"),!n||n.writable))&&!g},{endsWith:function(e){var t=s(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,a=void 0===r?n:h(c(r),n),o=s(e);return v?v(t,o,a):p(t,a-o.length,a)===o}})},2378:(e,t,r)=>{"use strict";var n=r(1329),a=r(3133),o=r(7072),i=r(9128),c=r(4350),s=r(6749),u=r(7938),l=r(2464),f=r(7752),d=r(9334),v=r(1533),p=r(7516),h=r(2906),g=r(2380),y=r(2355),b=r(9147),m=r(5360)("replace"),w=Math.max,x=Math.min,k=o([].concat),O=o([].push),W=o("".indexOf),$=o("".slice),E="$0"==="a".replace(/./,"$0"),S=!!/./[m]&&""===/./[m]("a","$0");i("replace",(function(e,t,r){var o=S?"$":"$0";return[function(e,r){var n=p(this),o=l(e)?void 0:g(e,m);return o?a(o,e,n,r):a(t,v(n),e,r)},function(e,a){var i=s(this),c=v(e);if("string"==typeof a&&-1===W(a,o)&&-1===W(a,"$<")){var l=r(t,i,c,a);if(l.done)return l.value}var p=u(a);p||(a=v(a));var g=i.global;if(g){var m=i.unicode;i.lastIndex=0}for(var E=[];;){var S=b(i,c);if(null===S)break;if(O(E,S),!g)break;""===v(S[0])&&(i.lastIndex=h(c,d(i.lastIndex),m))}for(var j,A="",M=0,P=0;P<E.length;P++){for(var T=v((S=E[P])[0]),R=w(x(f(S.index),c.length),0),H=[],I=1;I<S.length;I++)O(H,void 0===(j=S[I])?j:String(j));var N=S.groups;if(p){var C=k([T],H,R,c);void 0!==N&&O(C,N);var L=v(n(a,void 0,C))}else L=y(T,c,R,H,N,a);R>=M&&(A+=$(c,M,R)+L,M=R+T.length)}return A+$(c,M)}]}),!!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!E||S)},9507:(e,t,r)=>{"use strict";var n,a=r(6958),o=r(8358),i=r(7583).f,c=r(9334),s=r(1533),u=r(2549),l=r(7516),f=r(347),d=r(9371),v=o("".startsWith),p=o("".slice),h=Math.min,g=f("startsWith");a({target:"String",proto:!0,forced:!!(d||g||(n=i(String.prototype,"startsWith"),!n||n.writable))&&!g},{startsWith:function(e){var t=s(l(this));u(e);var r=c(h(arguments.length>1?arguments[1]:void 0,t.length)),n=s(e);return v?v(t,n,r):p(t,r,r+n.length)===n}})}}]);
//# sourceMappingURL=681-7c1354.js.map